# 機能仕様書

## 1. サービス概要

**サービス名**: sharibatezu（シャリバテず）
**目的**: 日本百名山を登る際に必要な行動食を提案する。

> 「シャリバテ」とは登山中に食料不足で急激に体力が落ちる状態のこと。
> このアプリで事前に必要カロリーを把握し、シャリバテを防ぐ。

---

## 2. ユーザーストーリー

- ユーザーは百名山の中から登る山を選択できる
- ユーザーは自分の体重を入力できる
- ユーザーは計算ボタンを押すと消費カロリーが表示される
- ユーザーは結果をもとに必要な食料の目安を把握できる

---

## 3. 機能一覧

### 3.1 山の選択機能

- 日本百名山（100座）から山を選択する
- 山名・都道府県・標高を表示する
- ドロップダウンで選択可能にする

### 3.2 エネルギー計算機能（メイン機能）

ユーザーの入力をもとに消費カロリーを算出する。

**入力項目**

| 項目 | 型 | バリデーション |
|------|----|------|
| 体重 | number (kg) | 1〜200kg |
| 装備の重量 | number (kg) | 0〜100kg（衣類・靴・ザックなど身につけているものの重量） |
| 選択した山 | string | 百名山から選択 |

**計算式**

行動中の消費カロリーはB式で算出する：

```
コース定数 = (1.8 * 行動時間（h）） + （（0.3 * 歩行距離（km）） + （10.0 * 上りの累積標高差（km）） + （0.6 * 下りの累積標高差（km））
行動中のエネルギー消費量（kcal） = コース定数 * （体重（kg） + 装備の重量（kg）） 
```

> **参考: A式（簡易計算）**
> ```
> 行動中のエネルギー消費量 (kcal) = 体重 (kg) × 行動時間 (h) × 5
> ```
> B式に軽装・標準コースタイムを代入するとA式とほぼ同じ値が得られる。

**出力項目**

| 項目 | 内容 |
|------|------|
| 消費カロリー合計 | kcal |
| 推奨補給カロリー | 消費量の 60〜70% を補給目標として表示 |

### 3.3 百名山データ

各山は以下の型で管理する（静的JSONファイル）：

```typescript
type Mountain = {
  id: number;
  name: string;              // 山名（日本語）
  nameKana: string;          // 山名（かな）
  prefecture: string;        // 都道府県
  courseName: string;        // コース名
  courseConstant: number;    // コース定数
};
```

---

## 4. 画面構成

```
/ （トップ・計算ページ）
  ├── 山の選択フォーム（ドロップダウン）
  ├── 体重入力フォーム
  ├── 計算ボタン
  └── 結果表示エリア
      ├── 消費カロリー合計
      └── 推奨補給カロリー
```

---

## 5. 非機能要件

| 項目 | 内容 |
|------|------|
| レスポンス速度 | 計算結果は1秒以内に返す |
| インフラコスト | Cloudflare 無料枠内で運用する |
| 対応デバイス | スマートフォン・PC 両対応（レスポンシブ） |
| 認証 | 不要（ログイン機能なし） |
| データ永続化 | 不要（百名山データは静的ファイル） |

---

## 6. 将来的な拡張候補（現スコープ外）

- コースバリエーションの選択（複数ルート対応）
- 天候・季節による補正係数
- 必要な食料リストの提案
- SNS シェア機能
